!function(t){t.fn.drawDoughnutChart=function(e,n){function a(t,e){var n=-1.57,a=4.7131,i=y+x(n)*t,o=b+C(n)*t,s=y+x(n)*e,r=b+C(n)*e,u=y+x(a)*t,l=b+C(a)*t,m=y+x(a)*e,p=b+C(a)*e,f=["M",i,o,"A",t,t,0,1,1,u,l,"Z","M",m,p,"A",e,e,0,1,0,s,r,"Z"];return f=f.join(" ")}function i(n){var a=t(this).data().order;if(A.showTip&&D.text(e[a].title+": "+e[a].value).fadeIn(200),A.showLabel){j.text(e[a].title).css("font-size",w(j,e[a].title));var i=A.shortInt?d(e[a].value):e[a].value;Y.html(i).css("font-size",w(Y,i))}A.onPathEnter.apply(t(this),[n,e])}function o(n){if(A.showTip&&D.hide(),A.showLabel){j.text(A.summaryTitle).css("font-size",w(j,A.summaryTitle));var a=A.shortInt?d(N):N;Y.html(a).css("font-size",w(Y,a))}A.onPathLeave.apply(t(this),[n,e])}function s(t){A.showTip&&D.css({top:t.pageY+A.tipOffsetY,left:t.pageX-D.width()/2+A.tipOffsetX})}function r(){var n=t(this).data().order;"undefined"!=typeof e[n].action&&e[n].action()}function u(t){var n=-S/2,i=1;if(A.animation&&A.animateRotate&&(i=t),l(t,N),q.attr("opacity",t),1===e.length&&4.7122<i*(e[0].value/N)*2*S+n)return void E[0].attr("d",a(z,M));for(var o=0,s=e.length;s>o;o++){var r=i*(e[o].value/N)*2*S,u=n+r,m=(u-n)%(2*S)>S?1:0,p=y+x(n)*z,f=b+C(n)*z,h=y+x(n)*M,c=b+C(n)*M,d=y+x(u)*z,w=b+C(u)*z,g=y+x(u)*M,v=b+C(u)*M,T=["M",p,f,"A",z,z,0,m,1,d,w,"L",g,v,"A",M,M,0,m,0,h,c,"Z"];E[o].attr("d",T.join(" ")),n+=r}}function l(t,e){Y.css({opacity:t}).text((e*t).toFixed(1));var n=A.shortInt?d(e):e;Y.html(n).css("font-size",w(Y,n))}function m(t,e){var n=A.animation?c(I(t),null,0):1;e(n)}function p(t){var e=A.animation?1/c(A.animationSteps,Number.MAX_VALUE,1):1,n=A.animation?0:1;k(function(){n+=e,m(n,t),1>=n?k(arguments.callee):A.afterDrawed.call(g)})}function f(t){return Math.min.apply(null,t)}function h(t){return!isNaN(parseFloat(t))&&isFinite(t)}function c(t,e,n){return h(e)&&t>e?e:h(n)&&n>t?n:t}function d(t){t=t.toString();var e=t.length;return 5>e?t:8>e?'<span title="'+t+'">'+t.substring(0,e-3)+"K</span>":'<span title="'+t+'">'+t.substring(0,e-6)+"M</span>"}function w(t,e){t.css("font-size",""),e=e.toString().replace(/(<([^>]+)>)/gi,"");var n=t.width()/e.length*A.ratioFont,a=t.width()-e.length*t.css("font-size").replace(/px/,"")/A.ratioFont;return 0>a?n+"px":""}var g=this,v=g.width(),T=g.height(),y=v/2,b=T/2,x=Math.cos,C=Math.sin,S=Math.PI,A=t.extend({segmentShowStroke:!0,segmentStrokeColor:"#0C1013",segmentStrokeWidth:1,baseColor:"rgba(0,0,0,0.5)",baseOffset:4,edgeOffset:10,percentageInnerCutout:75,animation:!0,animationSteps:90,animationEasing:"easeInOutExpo",animateRotate:!0,tipOffsetX:-8,tipOffsetY:-45,showTip:!0,showLabel:!1,ratioFont:1.5,shortInt:!1,tipClass:"doughnutTip",summaryClass:"doughnutSummary",summaryTitle:"TOTAL:",summaryTitleClass:"doughnutSummaryTitle",summaryNumberClass:"doughnutSummaryNumber",beforeDraw:function(){},afterDrawed:function(){},onPathEnter:function(){},onPathLeave:function(){}},n),O={linear:function(t){return t},easeInOutExpo:function(t){var e=.5>t?8*t*t*t*t:1-8*--t*t*t*t;return e>1?1:e}},k=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();A.beforeDraw.call(g);var F=t('<svg width="'+v+'" height="'+T+'" viewBox="0 0 '+v+" "+T+'" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"></svg>').appendTo(g),E=[],I=O[A.animationEasing],z=f([T/2,v/2])-A.edgeOffset,M=z*(A.percentageInnerCutout/100),N=0,L=z+A.baseOffset,R=M-A.baseOffset;t(document.createElementNS("http://www.w3.org/2000/svg","path")).attr({d:a(L,R),fill:A.baseColor}).appendTo(F);var q=t(document.createElementNS("http://www.w3.org/2000/svg","g"));if(q.attr({opacity:0}).appendTo(F),A.showTip){var D=t('<div class="'+A.tipClass+'" />').appendTo("body").hide();D.width(),D.height()}var P=2*(M-(z-M)),X=t('<div class="'+A.summaryClass+'" />').appendTo(g).css({width:P+"px",height:P+"px","margin-left":-(P/2)+"px","margin-top":-(P/2)+"px"}),j=t('<p class="'+A.summaryTitleClass+'">'+A.summaryTitle+"</p>").appendTo(X);j.css("font-size",w(j,A.summaryTitle));for(var Y=t('<p class="'+A.summaryNumberClass+'"></p>').appendTo(X).css({opacity:0}),Z=0,W=e.length;W>Z;Z++)N+=e[Z].value,E[Z]=t(document.createElementNS("http://www.w3.org/2000/svg","path")).attr({"stroke-width":A.segmentStrokeWidth,stroke:A.segmentStrokeColor,fill:e[Z].color,"data-order":Z}).appendTo(q).on("mouseenter",i).on("mouseleave",o).on("mousemove",s).on("click",r);return p(u),g}}(jQuery);